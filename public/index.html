<html>
<head>
    <script src="jquery-2.1.3.min.js"></script>
    <script src="bootstrap.min.js"></script>
    <script src="jquery.bootpag.min.js"></script>
    <link rel="stylesheet" href="bootstrap.min.css">
    <style type="text/css">
      .modal-dialog {
            width: 100%;
            height: 100%;
            padding: 0;
            margin:0;
      }
      .modal-content {   
            height: 100%;
            border-radius: 0;
            color:white;
            overflow:auto;
      }

    </style>
</head>
<body>
    <div class="container">
      <div class="row">
        <div class="col-md-9">
          <div id="page-selection-top"></div>
          <div id="content"></div>
          <div id="page-selection-bot"></div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="ImageModal">
      <div class="modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Image</h4>
          </div>
          <div class="modal-body">
            <img id="image-on" src="" height="auto" width="auto"></div>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    <script>
        var InsertImages = function (images) {
          $("#content").html("")
          for (var i = images.length - 1; i >= 0; i--) {
            $("#content").append('<a href="#/image/'+images[i].id+'"><img id="image-"'+images[i].id+' data-id="'+images[i].id+'" src="'+images[i].path+'" class="img-thumbnail" width="140" height="140" onclick=\'OpenImage("'+images[i].path+'")\' >')
          };
        }
        var LoadImages = function (page, rows) {
          $.get("api/images?page="+page, function (data) {
            rows(data)
          })
        };
        var OpenImage = function (path) {
            $('#image-on').attr("src", path).promise().done(function () {
              $('#ImageModal').modal();
            })
        };
        // init bootpag
        $('#page-selection-top, #page-selection-bot').bootpag({
            total: 9
        }).on("page", function(event, /* page number here */ num){
             LoadImages(num, function (data) {
               InsertImages(data);
             })
        });

        $( document ).ready(function () {
          LoadImages(1, function (images) {
            InsertImages(images);
          });
          $.get("api/images/pages", function (count) {
            console.log(count.pages);
            $('#page-selection-top, #page-selection-bot').bootpag({
              total: count.pages
            })
          })
        })
    </script>
</body>
</html>
